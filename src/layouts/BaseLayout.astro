---
import '@/styles/globals.css';
import 'highlight.js/styles/github-dark.min.css';

const {
  title = 'tsukie - tech, soul, and dream',
  description = "Welcome to Tsukie, a blog where coding, life, and my indie hacker journey converge.",
  ogImage = 'https://tsukie.com/images/about.jpg',
  ogUrl = 'https://tsukie.com/',
  ogType = 'website',
  jsonLd,
} = Astro.props;

const websiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "tsukie",
  "url": "https://tsukie.com",
  "description": "A blog where coding, life, and my indie hacker journey converge.",
  "author": {
    "@type": "Person",
    "name": "Minh Nguyen",
  },
};
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={ogUrl} />

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="tsukie" href="/rss.xml" />

    <!-- Font preloads -->
    <link rel="preload" href="/fonts/Inter-latin.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="/fonts/Aspekta-500.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="/fonts/Aspekta-650.woff2" as="font" type="font/woff2" crossorigin />

    <!-- Open Graph -->
    <meta property="og:type" content={ogType} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={ogUrl} />
    <meta property="og:image" content={ogImage} />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:creator" content="@minhnh94" />
    <meta name="twitter:image" content={ogImage} />

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json" set:html={JSON.stringify(websiteSchema)} />
    {jsonLd && <script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />}

    <!-- Plausible Analytics -->
    <script defer data-domain="tsukie.com" src="https://plausible.tsukie.com/js/script.outbound-links.tagged-events.js"></script>

    <!-- Theme: prevent flash of wrong theme -->
    <script is:inline>
      (function() {
        const theme = localStorage.getItem('theme');
        if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
        } else {
          document.documentElement.classList.remove('dark');
        }
      })();
    </script>
  </head>
  <body class="font-inter antialiased bg-white text-slate-800 dark:bg-slate-900 dark:text-slate-200 tracking-tight">
    <slot />
  </body>
</html>
