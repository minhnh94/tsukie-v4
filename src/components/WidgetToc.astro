---
const { headings = [] } = Astro.props;
const minDepth = Math.min(...headings.map((h: { depth: number }) => h.depth));
const topLevel = headings.filter(
  (h: { depth: number }) => h.depth === minDepth,
);
---

{
  topLevel.length > 0 && (
    <div class="rounded-lg border border-slate-200 dark:border-slate-800 dark:bg-gradient-to-t dark:from-slate-800 dark:to-slate-800/30 odd:rotate-1 even:-rotate-1 p-5">
      <h3 class="font-aspekta font-[650] mb-3">Table of contents</h3>
      <ul class="space-y-3">
        {topLevel.map((h: { depth: number; id: string; text: string }) => (
          <li class="inline-flex">
            <span class="text-sky-500 mr-2">&mdash;</span>
            <a
              class="font-aspekta font-[650] text-sm inline-flex relative hover:text-sky-500 duration-150 ease-out before:scale-x-0 before:origin-center before:absolute before:inset-0 before:bg-sky-200 dark:before:bg-sky-500 before:opacity-30 before:-z-10 before:translate-y-1/4 before:-rotate-2 hover:before:scale-100 before:duration-150 before:ease-in-out"
              href={`#${h.id}`}
            >
              {h.text}
            </a>
          </li>
        ))}
      </ul>
    </div>
  )
}
